{"version":3,"file":"js/dropbutton.es6.js","mappings":"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","sources":["webpack://guswds/external var \"Drupal\"","webpack://guswds/external var \"jQuery\"","webpack://guswds/external var \"once\"","webpack://guswds/webpack/bootstrap","webpack://guswds/webpack/runtime/compat get default export","webpack://guswds/webpack/runtime/define property getters","webpack://guswds/webpack/runtime/hasOwnProperty shorthand","webpack://guswds/webpack/runtime/make namespace object","webpack://guswds/./source/04-components/dropbutton/dropbutton.es6.ts"],"sourcesContent":["module.exports = Drupal;","module.exports = jQuery;","module.exports = once;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import jQuery from 'jquery';\nimport Drupal from 'drupal';\nimport once from 'once';\n\n/**\n * @file\n * Dropbutton feature.\n */\n\n(function initDropbutton($) {\n  /**\n   * Delegated callback for opening and closing dropbutton secondary actions.\n   *\n   * @function Drupal.DropButton~dropbuttonClickHandler\n   *\n   * @param {jQuery.Event} e\n   *   The event triggered.\n   */\n  function dropbuttonClickHandler(e: JQuery.Event) {\n    e.preventDefault();\n    $(e.target).closest('.js-dropbutton').toggleClass('is-open');\n  }\n\n  /**\n   * A DropButton presents an HTML list as a button with a primary action.\n   *\n   * All secondary actions beyond the first in the list are presented in a\n   * dropdown list accessible through a toggle arrow associated with the button.\n   */\n  class DropButton {\n    $dropbutton: JQuery;\n\n    $list: JQuery;\n\n    $actions: JQuery;\n\n    timerID = 0;\n\n    /**\n     * Store all processed DropButtons.\n     */\n    static dropbuttons = [] as DropButton[];\n\n    /**\n     * @param {HTMLElement} dropbutton\n     *   A DOM element.\n     * @param {object} settings\n     *   A list of options including:\n     * @param {string} settings.title\n     *   The text inside the toggle link element. This text is hidden\n     *   from visual UAs.\n     */\n    constructor(dropbutton: HTMLElement, settings = {}) {\n\n      // Merge defaults with settings.\n      const options = $.extend(\n        {title: Drupal.t('List additional actions')},\n        settings\n      );\n      const $dropbutton = $(dropbutton);\n\n      /**\n       * @type {jQuery}\n       */\n      this.$dropbutton = $dropbutton;\n\n      /**\n       * @type {jQuery}\n       */\n      this.$list = $dropbutton.find('.js-dropbutton-list');\n\n      /**\n       * Find actions and mark them.\n       *\n       * @type {jQuery}\n       */\n      this.$actions = this.$list.find('li');\n\n      // Add the special dropdown only if there are hidden actions.\n      if (this.$actions.length > 1) {\n        // Identify the first element of the collection.\n        const $primary = this.$actions.slice(0, 1);\n        $primary.addClass('is-action');\n        // Identify the secondary actions.\n        const $secondary = this.$actions.slice(1);\n        $secondary.addClass('is-secondary-action');\n        // Add toggle link.\n        $primary.after(Drupal.theme('dropbuttonToggle', options));\n        // Bind mouse events.\n        this.$dropbutton.addClass('has-multiple').on({\n          /**\n           * Adds a timeout to close the dropdown on mouseleave.\n           */\n          'mouseleave.dropbutton': $.proxy(this.hoverOut, this),\n\n          /**\n           * Clears timeout when mouseout of the dropdown.\n           */\n          'mouseenter.dropbutton': $.proxy(this.hoverIn, this),\n\n          /**\n           * Similar to mouseleave/mouseenter, but for keyboard navigation.\n           */\n          'focusout.dropbutton': $.proxy(this.focusOut, this),\n\n          'focusin.dropbutton': $.proxy(this.focusIn, this),\n        });\n      } else {\n        this.$dropbutton.addClass('is-single');\n      }\n    }\n\n    /**\n     * Toggle the dropbutton open and closed.\n     *\n     * @param {boolean} show\n     *   Force the dropbutton to open by passing true or to close by\n     *   passing false.\n     */\n    toggle(show?: boolean) {\n      const isBool = typeof show === 'boolean';\n      const openButton = isBool\n        ? show\n        : !this.$dropbutton.hasClass('is-open');\n      this.$dropbutton.toggleClass('is-open', openButton);\n    }\n\n    hoverIn = () => {\n      // Clear any previous timer we were using.\n      if (this.timerID) {\n        window.clearTimeout(this.timerID);\n      }\n    };\n\n    hoverOut = () => {\n      // Wait half a second before closing.\n      this.timerID = window.setTimeout($.proxy(this, 'close'), 500);\n    };\n\n    open = () => this.toggle(true);\n\n    close = () => this.toggle(false);\n\n    focusOut = () => this.hoverOut();\n\n    focusIn = () => this.hoverIn();\n  }\n\n  /**\n   * A toggle is an interactive element often bound to a click handler.\n   *\n   * @param {object} options\n   *   Options object.\n   * @param {string} options.title\n   *   The HTML anchor title attribute and text for the inner span element.\n   *\n   * @return {string}\n   *   A string representing a DOM fragment.\n   */\n  Drupal.theme.dropbuttonToggle = (options: { title: string } ) => {\n    return `<li class=\"c-dropbutton__toggle\"><button class=\"c-dropbutton__toggle-button\" type=\"button\"><span class=\"u-visually-hidden\">${options.title}</span></button></li>`;\n  };\n\n  // Expose constructor in the public space.\n  Drupal.DropButton = DropButton;\n\n  /**\n   * Process elements with the .dropbutton class on page load.\n   *\n   * @type {Drupal~behavior}\n   *\n   * @prop {Drupal~behaviorAttach} attach\n   *   Attaches dropButton behaviors.\n   */\n  Drupal.behaviors.dropButton = {\n    attach(context, settings) {\n      const options = $.extend({ dropbutton: {} }, settings);\n      const dropbuttons = once('dropbutton', '.js-dropbutton', context);\n      if (dropbuttons.length) {\n        // Adds the delegated handler that will toggle dropdowns on click.\n        once('dropbuttonClick', 'body', context).forEach((bodyElem: HTMLElement) => {\n          const $body = $(bodyElem);\n          if ($body.length) {\n            $body.on('click', '.c-dropbutton__toggle', dropbuttonClickHandler);\n          }\n          // Initialize all buttons.\n          const il = dropbuttons.length;\n          for (let i = 0; i < il; i += 1) {\n            DropButton.dropbuttons.push(\n              new DropButton(dropbuttons[i], options.dropbutton)\n            );\n          }\n        });\n      }\n    },\n  };\n})(jQuery);\n"],"names":[],"sourceRoot":""}